<head>
  <link rel='stylesheet' href='/technical-styles/api-key-generation.css' />
  <script src='/technical-scripts/api-key-generation.js' defer></script>
</head>

<body>
  <section>
    {{#applicationMetadata}}
      <div class='container my-5'>
        <div class='form-card p-5'>
          {{#if ../isProduction}}
            <h2 class='title mb-4'>Generate Production API Key</h2>
          {{else}}
            <h2 class='title mb-4'>Generate Sanbox API Key</h2>
          {{/if}}
          <p class='text-muted mb-4'>
            Use the Generate Key button to generate a self-contained JWT token.
          </p>
          <form id='apiKeyGenerateForm' data-application-id="{{applicationId}}" data-is-production="{{../isProduction}}">

            <div class='form-check'>
              <input
                class='form-check-input'
                type='radio'
                name='option'
                id='noneCheck-{{#if ../isProduction}}production{{else}}sandbox{{/if}}'
                checked
                {{#if ../isProduction}}
                  onclick='updateProductionSections()'
                {{else}}
                  onclick='updateSandboxSections()'
                {{/if}}
              />
              <label class='form-check-label' for='noneCheck-{{#if ../isProduction}}production{{else}}sandbox{{/if}}'>None</label>
            </div>

            <div class='form-check'>
              <input
                class='form-check-input'
                type='radio'
                name='option'
                id='ipCheck-{{#if ../isProduction}}production{{else}}sandbox{{/if}}'
                {{#if ../isProduction}}
                  onclick='updateProductionSections()'
                {{else}}
                  onclick='updateSandboxSections()'
                {{/if}}
              />
              <label class='form-check-label' for='ipCheck-{{#if ../isProduction}}production{{else}}sandbox{{/if}}'>IP Addresses</label>
            </div>

            {{! IP Section }}
            <div id='section-ip-{{#if ../isProduction}}production{{else}}sandbox{{/if}}' style='display: none;'>
              <div class='mb-3'>
                <label for='ip-input' class='form-label'>
                  IP Addresses
                  <span class='text-danger'>*</span>
                </label>
                <div id='ip-container' class='form-control d-flex flex-wrap'>
                  <input
                    type='text'
                    id='ip-input'
                    class='border-0 flex-grow-1'
                    placeholder='Enter IP Address'
                    onkeydown='addIp(event)'
                  />
                </div>
              </div>
              <div class='form-text mb-3'>Once you add an IP address, press
                <span class='text-danger'>Enter</span>. Specify one IPv4 or IPv6
                or a subnet using CIDR notation. Examples: 192.168.1.2,
                152.12.0.0/13, 2002:eb8::2 or 1001:ab8::/44</div>
              <input type='hidden' id='ip-values' name='ip-values' />
            </div>
            {{! IP Section ends }}

            <div class='form-check'>
              <input
                class='form-check-input'
                type='radio'
                name='option'
                id='httpCheck-{{#if ../isProduction}}production{{else}}sandbox{{/if}}'
                {{#if ../isProduction}}
                  onclick='updateProductionSections()'
                {{else}}
                  onclick='updateSandboxSections()'
                {{/if}}
              />
              <label class='form-check-label' for='httpCheck-{{#if ../isProduction}}production{{else}}sandbox{{/if}}'>HTTP Referrers
                (Web Sites)</label>
            </div>

            {{! HTTP Section }}
            <div id='section-http-{{#if ../isProduction}}production{{else}}sandbox{{/if}}' style='display: none;'>
              <div class='mb-3'>
                <label for='http-input' class='form-label'>
                  HTTP Referrers
                  <span class='text-danger'>*</span>
                </label>
                <div id='http-container' class='form-control d-flex flex-wrap'>
                  <input
                    type='text'
                    id='http-input'
                    class='border-0 flex-grow-1'
                    placeholder='Enter HTTP Referrer'
                    onkeydown='addHttpReferrer(event)'
                  />
                </div>
              </div>
              <div class='form-text mb-3'>Once you add an HTTP Referrer, press
                <span class='text-danger'>Enter</span>. A specific URL with an
                exact path: www.example.com/path Any URL in a single subdomain,
                using a wildcard asterisk (*): sub.example.com/* Any subdomain
                or path URLs in a single domain, using wildcard asterisks (*):
                *.example.com/*</div>
              <input type='hidden' id='http-values' name='http-values' />
            </div>
            {{! HTTP Section ends }}

            <!-- Buttons -->
            <div class='d-flex justify-content-end gap-3'>
              <button
                class='btn btn-primary custom-save-btn'
                id='apiKeyGenerateButton'
                type='button'
                onClick="generateAPIKey('{{applicationId}}', '{{../isProduction}}')"
              >
                Generate Key
              </button>
            </div>
          </form>
        </div>
      </div>
    {{/applicationMetadata}}
  </section>
</body>